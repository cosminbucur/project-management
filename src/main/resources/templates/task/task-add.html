<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="fragments/header :: header-css"/>
    <title>Add task</title>
</head>

<body>

<div th:replace="fragments/header :: header"/>

<h2>Add task details</h2>
<p>You can change these details anytime in your task settings.</p>

<div>
    <form class="row g-3" th:action="@{/tasks/add}" th:object="${task}" method="post">

    </form>
</div>

<form class="row g-3 needs-validation" novalidate th:action="@{/tasks/add}" th:object="${task}" method="post">
    <div>
        <div class="col-md-4 form-group required">
            <label for="project" class="form-label">Project</label>
            <select class="form-select" id="project" th:field="${task.project.name}" required>
                <option selected th:value="null">Pick a project</option>
                <option th:each="project : ${projects}" th:value="${project.name}" th:text="${project.name}"></option>
            </select>
            <div class="invalid-feedback">
                You need a project for your task.
            </div>
        </div>

        <div class="col-md-4 form-group required">
            <label for="taskType" class="form-label">Task type</label>
            <select class="form-select" id="taskType" th:field="${task.taskType}" required>
                <option selected th:value="null">Select type of task</option>
                <option th:each="taskTypeOpt : ${T(com.sda.project.management.model.TaskType).values()}" th:value="${taskTypeOpt}" th:text="${taskTypeOpt}"></option>
            </select>
            <div class="invalid-feedback">
                You need a type for your task.
            </div>

            <hr class="bg-danger border-2 border-top border-danger">

            <h6>Task description will be automatically generated</h6>

            <hr class="bg-danger border-2 border-top border-danger">

        </div>

        <div class="col-md-4 form-group required">
            <div class="mb-3">
                <label for="summary" class="form-label">Task summary</label>
                <textarea class="form-control" id="summary" rows="3"
                          placeholder="Write your summary of the task here" th:field="*{summary}"></textarea>
                <div class="invalid-feedback">
                    This summary is useful to assignees, include descriptions and/or acceptance criteria...
                </div>
            </div>
        </div>

        <div class="col-md-4 form-group d-flex required">
            <label for="assignee" class="form-label">Assignee</label>
            <select class="form-select" id="assignee" th:field="${task.assignee.id}" required>
                <option selected th:value="null">Select your favorite minion</option>
                <option th:each="user : ${users}" th:value="${user.id}" th:text="|${user.firstName} ${user.lastName}|"></option>
            </select>
            <label for="storyPoints" class="form-label">Story points value</label>
            <input class="form-control" id="storyPoints" type="text" placeholder="1, 3, 5..." th:field="*{storyPoints}">
        </div>

        <div class="col-md-4 form-group required">
            <label for="sprint" class="form-label">Sprint</label>
            <select class="form-select" id="sprint" th:field="${task.sprint.name}" required>
                <option selected th:value="null">Add this task to a sprint</option>
                <option th:each="sprint : ${sprints}" th:value="${sprint.name}" th:text="${sprint.name}"></option>
            </select>
            <div class="invalid-feedback">
                The task has to be assigned to a sprint.
            </div>
        </div>

        <div class="col-md-4 form-group required">
            <label for="status" class="form-label">Status</label>
            <select class="form-select" id="status" th:field="${task.taskType}" required>
                <option selected th:value="null">Select type of task</option>
                <option th:each="statusOpt : ${T(com.sda.project.management.model.TaskStatus).values()}" th:value="${statusOpt}" th:text="${statusOpt}"></option>
            </select>
            <div class="invalid-feedback">
                Place a status on your task.
            </div>
        </div>
    </div>
    <div class="col-12">
        <button type="submit" class="btn btn-secondary" id="cancel" name="cancel">Cancel</button>
        <button type="submit" class="btn btn-primary" id="save" name="save">Create task</button>
    </div>
</form>

<div th:replace="fragments/footer :: footer"/>

</body>
</html>